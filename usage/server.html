<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The Python Server &#8212; Python-Skill Bridge  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="../examples/index.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="the-python-server">
<span id="server"></span><h1>The Python Server<a class="headerlink" href="#the-python-server" title="Link to this heading">¶</a></h1>
<p>Initially the server script must be run by loading the <code class="docutils literal notranslate"><span class="pre">python_server.il</span></code>. (Type <code class="docutils literal notranslate"><span class="pre">skillbridge</span> <span class="pre">path</span></code>
into your terminal to get the correct paths).</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">load</span><span class="p">(</span><span class="s">&quot;PATH-TO-SKILL-IPC-SCRIPT&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After that, these management commands are available in the Skill console.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pyStartServer">
<span class="sig-name descname"><span class="pre">pyStartServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id=&quot;default&quot;</span> <span class="pre">logLevel=&quot;INFO&quot;</span> <span class="pre">singleMode=nil</span> <span class="pre">timeout=nil</span> <span class="pre">python=&quot;python&quot;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyStartServer" title="Link to this definition">¶</a></dt>
<dd><p>This starts the python server. If you are only running a single instance of
Virtuoso you can use the default id. For more instances, each server needs its own
id.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">logLevel</span></code> can be used to set the log level, the default is <code class="docutils literal notranslate"><span class="pre">&quot;INFO&quot;</span></code>.
Other values are <code class="docutils literal notranslate"><span class="pre">&quot;DEBUG&quot;</span></code> to print absolutely everything, <code class="docutils literal notranslate"><span class="pre">&quot;INFO&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;WARNING&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ERROR&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;FATAL&quot;</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The log levels <code class="docutils literal notranslate"><span class="pre">&quot;DEBUG&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;INFO&quot;</span></code> are not recommended, because then
the time for a round-trip between the client and the server is effectively
two to three times as long!</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">singleMode</span></code> parameter allows you to disable simultaneous connections to
the server. By default, multiple connections are allowed for convenience reasons.
Especially jupyter users will benefit from this, since jupyter keeps the socket
connections open.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Even when <code class="docutils literal notranslate"><span class="pre">singleMode</span></code> is disabled it is <strong>never</strong> safe to simultaneously
access the server. This will lead to strange errors, where variables don’t
contain what you initially assigned to them.</p>
<p>In order to stay safe: <strong>never</strong> interleave commands from two different
connections.</p>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> parameter you can control how long the server will wait for
the Skill code to finish. <code class="docutils literal notranslate"><span class="pre">nil</span></code> means: wait forever, setting it to a number will
wait at most that number as seconds.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Whenever a timeout occurs the python client and the Skill server are out of sync.
You must restart the Skill server before you can continue.</p>
</div>
<p>The default python interpreter that is used to start the server is <code class="docutils literal notranslate"><span class="pre">&quot;python&quot;</span></code>. If your
interpreter is called differently (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;python3.6&quot;</span></code>) you can pass its name with the
<code class="docutils literal notranslate"><span class="pre">python</span></code> parameter. Your specified interpreter does not need the <code class="docutils literal notranslate"><span class="pre">skillbridge</span></code> package.
The only requirement is <code class="docutils literal notranslate"><span class="pre">python&gt;=3.6</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parameters are marked with <code class="docutils literal notranslate"><span class="pre">&#64;key</span></code> which means that it is only possible
to change their default value by explicitly naming them when calling the function.</p>
<p>Here are a few examples:</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="c1">; only change the log level to &quot;INFO&quot;</span>
<span class="nv">pyStartServer</span><span class="w"> </span><span class="nv">?logLevel</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span>

<span class="c1">; only change the server id to &quot;foo&quot;</span>
<span class="nv">pyStartServer</span><span class="w"> </span><span class="nv">?id</span><span class="w"> </span><span class="s">&quot;foo&quot;</span>

<span class="c1">; change both server id and log level</span>
<span class="nv">pyStartServer</span><span class="w"> </span><span class="nv">?id</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="nv">?logLevel</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span>

<span class="c1">; same as above, the order does not matter</span>
<span class="nv">pyStartServer</span><span class="w"> </span><span class="nv">?logLevel</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span><span class="w"> </span><span class="nv">?id</span><span class="w"> </span><span class="s">&quot;foo&quot;</span>

<span class="c1">; this tells the server to wait at most 10.5 seconds</span>
<span class="c1">; before sending a timeout error</span>
<span class="nv">pyStartServer</span><span class="w"> </span><span class="nv">?timeout</span><span class="w"> </span><span class="mf">10.5</span>

<span class="c1">; use a custom interpreter path</span>
<span class="nv">pyStartServer</span><span class="w"> </span><span class="nv">?python</span><span class="w"> </span><span class="s">&quot;python3.6&quot;</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyKillServer">
<span class="sig-name descname"><span class="pre">pyKillServer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyKillServer" title="Link to this definition">¶</a></dt>
<dd><p>This terminates the python subprocess and thus, kills the server.
After that, no connections from the client side can be made anymore
and active connections will result in a <code class="xref py py-class docutils literal notranslate"><span class="pre">BrokenPipe</span></code> exception
the next time they are used.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyReloadScript">
<span class="sig-name descname"><span class="pre">pyReloadScript</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyReloadScript" title="Link to this definition">¶</a></dt>
<dd><p>This calls <a class="reference internal" href="#pyKillServer" title="pyKillServer"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyKillServer()</span></code></a> and reloads the <code class="docutils literal notranslate"><span class="pre">python_server.il</span></code>
Skill script. Normally this function would not be used.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyShowLog">
<span class="sig-name descname"><span class="pre">pyShowLog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">numberOfLines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyShowLog" title="Link to this definition">¶</a></dt>
<dd><p>Used for debugging. This shows the logging output from the
python server. The parameter <code class="docutils literal notranslate"><span class="pre">numberOfLines</span></code> controls
how many lines will be printed. It always refers to the <strong>last</strong>
<code class="docutils literal notranslate"><span class="pre">numberOfLines</span></code> lines.</p>
<p>Example:</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="c1">; show the last 10 lines of the log file</span>
<span class="nv">pyShowLog</span>

<span class="c1">; show the last 20 lines of the log file</span>
<span class="nv">pyShowLog</span><span class="w"> </span><span class="mi">20</span>
</pre></div>
</div>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Python-Skill Bridge</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">The Python Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Usage</a><ul>
      <li>Previous: <a href="quickstart.html" title="previous chapter">Quickstart</a></li>
      <li>Next: <a href="../examples/index.html" title="next chapter">Examples</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2019, Niels Buwen.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/usage/server.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>